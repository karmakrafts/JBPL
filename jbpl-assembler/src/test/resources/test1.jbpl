/*
 * A simple fibonacci implementation
 */

macro fib(n: i64): i64 {
    if(n < 0) ^return -1
    if(n == 0) ^return 0
    if(n == 1) ^return 1
    define a: i64 = 0
    define b: i64 = 1
    define temp: i64 = 0
    for(i in 2i64..n) {
        temp = a + b
        a = b
        b = temp
    }
    ^return b
}

define x: i64 = 0

for(i in 0i64..<50i64) {
    info "Fibonacci ${i}: ${x = fib(i)}"
}

assert x == 7778742049i64